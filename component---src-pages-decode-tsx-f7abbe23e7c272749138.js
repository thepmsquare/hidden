"use strict";(self.webpackChunkhidden=self.webpackChunkhidden||[]).push([[877],{6728:function(e,t,a){a.r(t),a.d(t,{Head:function(){return v}});var n=a(7294),r=a(4854),s=a(5295),l=a(245),o=a(2574),i=a(9617),c=a(9164),m=a(1354),d=a.n(m),g=a(5991),u=a(8879),p=a(5677),h=a(7063),w=a(6693),I=a(1023),f=a(2143);const E="undefined"!=typeof window,v=()=>n.createElement("title",null,"decode | hidden");t.default=e=>{let t;if(!(a=e.location.state)||null===a||!("selectedImageState"in a))return E&&(0,r.navigate)("/"),"";var a;let m,v;t=e.location.state.selectedImageState,m=E?window.localStorage.getItem("theme"):null,null!==m?v="dark"===m?"dark":"light":(v=g.Z.defaultThemeState,E&&window.localStorage.setItem("theme",g.Z.defaultThemeState));const{0:y,1:S}=(0,n.useState)(v),{0:b,1:Z}=(0,n.useState)({isOpen:!1,message:"",severity:"error"}),{0:k,1:N}=(0,n.useState)(t),{0:C,1:A}=(0,n.useState)(""),F=(e,t,a)=>{let n="";for(let r=0;r<e;r++)n+=t.data[4*a[0]+a[1]].toString(2).padStart(8,"0").slice(6),2===a[1]?(a[1]=0,a[0]=a[0]+1):a[1]=a[1]+1;return n};let T=(0,i.Z)({palette:{mode:y},typography:{fontFamily:g.Z.defaultFont}});return n.createElement(c.Z,{theme:T},n.createElement("main",{className:"main",style:{backgroundImage:'url("'+(null==k?void 0:k.selectedImage)+'")'}},n.createElement(s.Z,{className:"inside-main"},n.createElement(l.Z,null,"selected image:"," ",n.createElement(l.Z,{title:k.selectedImageName+"."+(null==k?void 0:k.selectedImageType),color:"primary",variant:"button"},k.selectedImageName.length>g.Z.step2FileNameLength.max?k.selectedImageName.slice(0,g.Z.step2FileNameLength.visibleEnds)+"..."+k.selectedImageName.slice(-g.Z.step2FileNameLength.visibleEnds)+"."+k.selectedImageType:k.selectedImageName+"."+k.selectedImageType)),n.createElement("form",{className:"form",onSubmit:async e=>{e.preventDefault();try{const e=new Image;e.src=k.selectedImage;const a=document.createElement("canvas");a.width=e.width,a.height=e.height;const n=a.getContext("2d",{colorSpace:"srgb"});if(null===n)throw Error("unexpected error.");n.drawImage(e,0,0);let s,l=(e=>{const t=[];let a=[0,0];for(;;){let n=F(1,e,a);if("0"===n.charAt(0))t.push(n+F(3,e,a));else{if(n===g.Z.messageAppendedAtEnd)break;if(n+=F(1,e,a),"110"===n.substring(0,3)){let r=n.substring(3)+F(2,e,a);if("10"!==F(1,e,a))throw new Error("Input image doesn't appear to have any encoded message.");r+=F(3,e,a),t.push(r)}else if("1110"===n){let n=F(2,e,a);if("10"!==F(1,e,a))throw new Error("Input image doesn't appear to have any encoded message.");if(n+=F(3,e,a),"10"!==F(1,e,a))throw new Error("Input image doesn't appear to have any encoded message.");n+=F(3,e,a),t.push(n)}else{if("11110"!==n.substring(0,5))throw new Error("Input image doesn't appear to have any encoded message.");{let r=n.substring(5)+F(1,e,a);if("10"!==F(1,e,a))throw new Error("Input image doesn't appear to have any encoded message.");if(r+=F(3,e,a),"10"!==F(1,e,a))throw new Error("Input image doesn't appear to have any encoded message.");if(r+=F(3,e,a),"10"!==F(1,e,a))throw new Error("Input image doesn't appear to have any encoded message.");r+=F(3,e,a),t.push(r)}}}}return t})(n.getImageData(0,0,a.width,a.height)),o=l.map((e=>String.fromCharCode(parseInt(e,2)))).join("");if(C){try{s=d().AES.decrypt(o,C).toString(d().enc.Utf8)}catch(t){throw new Error("Wrong Password.")}if(""===s)throw new Error("Wrong Password.")}else if(s=o,""===s)throw new Error("Input image doesn't appear to have any encoded message.");await(0,r.navigate)("/decode_share/",{state:{selectedImageState:k,finalMessage:s}})}catch(t){Z({isOpen:!0,message:t.message,severity:"error"})}}},n.createElement(f.Z,{value:C,onChange:e=>A(e.target.value),others:{autoFocus:!0},uniqueIdForARIA:"decode-password",variant:"outlined",label:"optional password"}),n.createElement(o.Z,{type:"submit",color:"primary",variant:"contained",size:"large"},"submit")),n.createElement(o.Z,{onClick:()=>{let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/png"),e.addEventListener("change",(e=>{(0,h.Z)(e,((e,t,a)=>{N({selectedImage:e,selectedImageName:t,selectedImageType:a})}),Z)})),e.click()},variant:"outlined",startIcon:n.createElement(w.Z,null)},"change selected image"),n.createElement(u.Z,{themeState:y,customChangeThemeState:e=>{S(e),E&&window.localStorage.setItem("theme",e)}}),n.createElement(o.Z,{onClick:async()=>{await(0,r.navigate)("/step2/",{state:{selectedImageState:k}})},variant:"outlined",size:"small",startIcon:n.createElement(I.Z,null)},"go back")),n.createElement(p.Z,{snackbarState:b,changeSnackbarState:Z})))}}}]);
//# sourceMappingURL=component---src-pages-decode-tsx-f7abbe23e7c272749138.js.map